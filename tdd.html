<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infographic: Kh√°m Ph√° Ti√™u Dao Du</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F0F4F8;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .gradient-text {
            background: linear-gradient(to right, #00A6ED, #0074D9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .flow-arrow {
            font-size: 2rem;
            color: #0074D9;
            line-height: 1;
        }
        .icon-unicode {
            font-size: 3rem;
            line-height: 1;
        }
        .gemini-modal-overlay {
            background-color: rgba(0, 0, 0, 0.5);
        }
        .gemini-loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #0074D9;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-5xl md:text-7xl font-black gradient-text mb-2">Ti√™u Dao Du</h1>
            <p class="text-xl md:text-2xl text-gray-600">H√†nh Tr√¨nh ƒê·∫°t ƒê·∫øn T·ª± Do Tuy·ªát ƒê·ªëi</p>
        </header>

        <main class="space-y-12">

            <section id="core-concepts">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-900">Nh√°nh 1: Nh·ªØng Kh√°i Ni·ªám C·ªët L√µi</h2>
                    <p class="mt-2 text-lg text-gray-600">Trang T·ª≠ ph√° v·ª° nh·ªØng c·∫∑p ph·∫°m tr√π ƒë·ªëi l·∫≠p ƒë·ªÉ m·ªü r·ªông nh·∫≠n th·ª©c c·ªßa ch√∫ng ta.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    
                    <div class="bg-white rounded-lg shadow-lg p-6 text-center flex flex-col">
                        <h3 class="text-2xl font-bold text-[#00A6ED] mb-4">ƒê·∫°i (Â§ß) vs Ti·ªÉu (Â∞è)</h3>
                        <div class="flex-grow">
                            <div class="flex justify-around items-center">
                                <div class="flex-1">
                                    <p class="text-5xl font-extrabold text-gray-800">L·ªöN</p>
                                    <p class="text-gray-500 mt-2">T·∫ßm nh√¨n vƒ© ƒë·∫°i, kh√¥ng gian v√¥ h·∫°n (Chim B·∫±ng)</p>
                                </div>
                                <span class="text-2xl font-light text-gray-400 mx-4">vs</span>
                                <div class="flex-1">
                                    <p class="text-3xl font-bold text-gray-600">NH·ªé</p>
                                    <p class="text-gray-500 mt-2">T·∫ßm nh√¨n h·∫°n h·∫πp, kh√¥ng gian gi·ªõi h·∫°n (Ve s·∫ßu)</p>
                                </div>
                            </div>
                            <p class="mt-4 text-sm text-gray-600">ƒê√¢y l√† s·ª± kh√°c bi·ªát v·ªÅ c·∫£nh gi·ªõi, kh√¥ng ph·∫£i s·ª± h∆°n thua.</p>
                        </div>
                        <button class="gemini-btn mt-4 w-full bg-blue-100 text-blue-800 font-semibold py-2 px-4 rounded-lg hover:bg-blue-200 transition" data-prompt="H√£y gi·∫£i th√≠ch ng·∫Øn g·ªçn √Ω nghƒ©a c·ªßa s·ª± ƒë·ªëi l·∫≠p 'L·ªõn' v√† 'Nh·ªè' trong Ti√™u Dao Du c·ªßa Trang T·ª≠ v√† c√°ch n√≥ gi√∫p ta ƒë·∫°t ƒë∆∞·ª£c t·ª± do tinh th·∫ßn trong cu·ªôc s·ªëng hi·ªán ƒë·∫°i.">‚ú® Xem Di·ªÖn Gi·∫£i Hi·ªán ƒê·∫°i</button>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                        <h3 class="text-2xl font-bold text-[#00A6ED] mb-4 text-center">H·ªØu ƒê√£i (ÊúâÂæÖ) vs V√¥ ƒê√£i (ÁÑ°ÂæÖ)</h3>
                        <ul class="space-y-3 flex-grow">
                            <li class="p-3 bg-blue-50 rounded-md">
                                <p class="font-semibold text-blue-800">H·ªØu ƒê√£i: T·ª± Do T∆∞∆°ng ƒê·ªëi</p>
                                <p class="text-sm text-blue-600">C·∫ßn c√≥ ch·ªó d·ª±a, ph·ª• thu·ªôc v√†o ƒëi·ªÅu ki·ªán b√™n ngo√†i. (VD: Li·ªát T·ª≠ c∆∞·ª°i gi√≥)</p>
                            </li>
                            <li class="p-3 bg-green-50 rounded-md">
                                <p class="font-semibold text-green-800">V√¥ ƒê√£i: T·ª± Do Tuy·ªát ƒê·ªëi</p>
                                <p class="text-sm text-green-600">Kh√¥ng c·∫ßn ch·ªó d·ª±a, h√≤a m√¨nh v·ªõi t·ª± nhi√™n. ƒê√¢y l√† ƒë√≠ch ƒë·∫øn c·ªßa Ti√™u Dao.</p>
                            </li>
                        </ul>
                         <button class="gemini-btn mt-4 w-full bg-blue-100 text-blue-800 font-semibold py-2 px-4 rounded-lg hover:bg-blue-200 transition" data-prompt="H√£y gi·∫£i th√≠ch kh√°i ni·ªám 'V√¥ ƒê√£i' (kh√¥ng ch·ªó d·ª±a) c·ªßa Trang T·ª≠ l√† g√¨ v√† l√†m sao ƒë·ªÉ √°p d·ª•ng n√≥ v√†o cu·ªôc s·ªëng hi·ªán ƒë·∫°i ƒë·ªÉ gi·∫£m b·ªõt s·ª± ph·ª• thu·ªôc v√†o c√°c y·∫øu t·ªë b√™n ngo√†i nh∆∞ ti·ªÅn b·∫°c, danh v·ªçng. Tr·∫£ l·ªùi ng·∫Øn g·ªçn.">‚ú® Xem Di·ªÖn Gi·∫£i Hi·ªán ƒê·∫°i</button>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6 text-center flex flex-col">
                        <h3 class="text-2xl font-bold text-[#00A6ED] mb-4">H·ªØu D·ª•ng (ÊúâÁî®) vs V√¥ D·ª•ng (ÁÑ°Áî®)</h3>
                        <div class="flex-grow">
                            <p class="text-gray-600 mb-4">Ngh·ªãch l√Ω v·ªÅ gi√° tr·ªã s·ª≠ d·ª•ng trong con m·∫Øt ng∆∞·ªùi ƒë·ªùi v√† ƒê·∫°o.</p>
                            <div class="p-4 bg-gray-100 rounded-lg">
                                 <p class="font-bold text-xl text-gray-700">"C√°i D·ª•ng c·ªßa s·ª± V√¥ D·ª•ng"</p>
                                 <p class="text-gray-600 mt-2">V√¨ b·ªã xem l√† v√¥ d·ª•ng (g·ªó c√¢y x·∫•u, qu·∫£ b·∫ßu to) n√™n kh√¥ng b·ªã can thi·ªáp, nh·ªù ƒë√≥ ƒë∆∞·ª£c b·∫£o t·ªìn v√† s·ªëng tr·ªçn v·∫πn ki·∫øp s·ªëng t·ª± nhi√™n.</p>
                            </div>
                        </div>
                        <button class="gemini-btn mt-4 w-full bg-blue-100 text-blue-800 font-semibold py-2 px-4 rounded-lg hover:bg-blue-200 transition" data-prompt="H√£y ƒë√≥ng vai m·ªôt tri·∫øt gia chuy√™n v·ªÅ ƒê·∫°o gi√°o. Gi·∫£i th√≠ch kh√°i ni·ªám 'C√°i D·ª•ng c·ªßa s·ª± V√¥ D·ª•ng' c·ªßa Trang T·ª≠ b·∫±ng ng√¥n ng·ªØ ƒë∆°n gi·∫£n, hi·ªán ƒë·∫°i k√®m theo m·ªôt v√≠ d·ª• th·ª±c t·∫ø cho ng∆∞·ªùi s·ªëng ·ªü th·∫ø k·ª∑ 21. Gi·ªØ c√¢u tr·∫£ l·ªùi ng·∫Øn g·ªçn trong m·ªôt ƒëo·∫°n vƒÉn.">‚ú® Xem Di·ªÖn Gi·∫£i Hi·ªán ƒê·∫°i</button>
                    </div>
                </div>
            </section>

            <section id="fables">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-900">Nh√°nh 2: C√°c C√¢u Chuy·ªán Ng·ª• Ng√¥n Ch√≠nh</h2>
                    <p class="mt-2 text-lg text-gray-600">Nh·ªØng c√¢u chuy·ªán s·ªëng ƒë·ªông minh h·ªça cho c√°c t∆∞ t∆∞·ªüng tri·∫øt h·ªçc.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="md:col-span-2 bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-2xl font-bold text-center text-[#0074D9] mb-4">C√° C√¥n H√≥a Chim B·∫±ng</h3>
                        <p class="text-center text-gray-600 mb-6">Minh h·ªça cho s·ª± bi·∫øn h√≥a vƒ© ƒë·∫°i v√† h√†nh tr√¨nh tr·ªü v·ªÅ v·ªõi ƒê·∫°o.</p>
                        <div class="flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-8">
                            <div class="text-center">
                                <p class="icon-unicode">üêü</p>
                                <p class="text-xl font-bold">C√Å C√îN</p>
                                <p class="text-gray-500">Ti·ªÅm ·∫©n, s√¢u th·∫≥m</p>
                            </div>
                            <div class="flow-arrow transform rotate-90 md:rotate-0">‚Üí</div>
                             <div class="text-center">
                                <p class="icon-unicode">ü¶Ö</p>
                                <p class="text-xl font-bold">CHIM B·∫∞NG</p>
                                <p class="text-gray-500">Bi·ªÉu hi·ªán, v∆∞∆°n xa</p>
                            </div>
                            <div class="flow-arrow transform rotate-90 md:rotate-0">‚Üí</div>
                             <div class="text-center">
                                <p class="icon-unicode">üåå</p>
                                <p class="text-xl font-bold">NAM MINH</p>
                                <p class="text-gray-500">B·ªÉ tr·ªùi, c·ªôi ngu·ªìn</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow-lg p-6">
                         <h3 class="text-2xl font-bold text-center text-[#0074D9] mb-4">So S√°nh T·∫ßm Nh√¨n</h3>
                         <p class="text-center text-gray-600 mb-4">"Ti·ªÉu tri" (c√°i bi·∫øt nh·ªè) kh√¥ng th·ªÉ hi·ªÉu "ƒë·∫°i tri" (c√°i bi·∫øt l·ªõn). Bi·ªÉu ƒë·ªì th·ªÉ hi·ªán s·ª± kh√°c bi·ªát v·ªÅ "c·∫£nh gi·ªõi" m·ªôt c√°ch t∆∞∆°ng ƒë·ªëi.</p>
                         <div class="chart-container">
                            <canvas id="visionChart"></canvas>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col justify-center">
                        <h3 class="text-2xl font-bold text-center text-[#0074D9] mb-4">Ng∆∞·ªùi ·ªü n√∫i Mi√™u C√¥ D·ªãch</h3>
                        <p class="text-center text-gray-600 mb-6">H√¨nh m·∫´u c·ªßa b·∫≠c Th·∫ßn Nh√¢n, ng∆∞·ªùi ƒë√£ si√™u vi·ªát kh·ªèi nh·ªØng gi·ªõi h·∫°n c·ªßa ng∆∞·ªùi th∆∞·ªùng.</p>
                        <ul class="space-y-4 text-lg text-center">
                            <li class="flex items-center justify-center space-x-3"><span class="text-2xl">‚ùÑÔ∏è</span><span>Da th·ªãt nh∆∞ bƒÉng tuy·∫øt</span></li>
                            <li class="flex items-center justify-center space-x-3"><span class="text-2xl">üå¨Ô∏è</span><span>Kh√¥ng ƒÉn ng≈© c·ªëc, h√≠t gi√≥ u·ªëng s∆∞∆°ng</span></li>
                            <li class="flex items-center justify-center space-x-3"><span class="text-2xl">üêâ</span><span>C∆∞·ª°i m√¢y ƒë·∫°p r·ªìng, rong ch∆°i b·ªën b·ªÉ</span></li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <section id="cultivation">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-900">Nh√°nh 3: Con ƒê∆∞·ªùng Tu D∆∞·ª°ng</h2>
                    <p class="mt-2 text-lg text-gray-600">Ba c·∫£nh gi·ªõi ƒë·∫°t ƒë∆∞·ª£c khi t·ª´ b·ªè nh·ªØng tr√≥i bu·ªôc c·ªßa c√°i t√¥i v√† th·∫ø t·ª•c.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                        <div class="flex-grow">
                            <p class="text-4xl font-black text-[#00A6ED]">CH√ç NH√ÇN</p>
                            <p class="text-2xl my-3">‚Üí</p>
                            <p class="text-3xl font-bold text-gray-700">V√î K·ª∂ (ÁÑ°Â∑±)</p>
                            <p class="text-gray-500 mt-2">Qu√™n ƒëi c√°i t√¥i v·ªã k·ª∑, kh√¥ng c√≤n xem m√¨nh l√† trung t√¢m.</p>
                        </div>
                         <button class="gemini-btn mt-4 w-full bg-blue-100 text-blue-800 font-semibold py-2 px-4 rounded-lg hover:bg-blue-200 transition" data-prompt="H√£y ƒë√≥ng vai m·ªôt tri·∫øt gia. Gi·∫£i th√≠ch kh√°i ni·ªám 'V√¥ K·ª∑' (Qu√™n ƒëi b·∫£n th√¢n) c·ªßa Trang T·ª≠ l√† g√¨ v√† l√†m th·∫ø n√†o n√≥ d·∫´n ƒë·∫øn t·ª± do tinh th·∫ßn trong b·ªëi c·∫£nh cu·ªôc s·ªëng hi·ªán ƒë·∫°i ƒë·∫ßy √°p l·ª±c. Gi·ªØ c√¢u tr·∫£ l·ªùi ng·∫Øn g·ªçn trong m·ªôt ƒëo·∫°n vƒÉn.">‚ú® Xem Di·ªÖn Gi·∫£i Hi·ªán ƒê·∫°i</button>
                    </div>
                    <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                         <div class="flex-grow">
                            <p class="text-4xl font-black text-[#00A6ED]">TH·∫¶N NH√ÇN</p>
                            <p class="text-2xl my-3">‚Üí</p>
                            <p class="text-3xl font-bold text-gray-700">V√î C√îNG (ÁÑ°Âäü)</p>
                            <p class="text-gray-500 mt-2">Kh√¥ng m√†ng ƒë·∫øn c√¥ng danh, s·ª± nghi·ªáp, th√†nh t·ª±u th·∫ø t·ª•c.</p>
                        </div>
                         <button class="gemini-btn mt-4 w-full bg-blue-100 text-blue-800 font-semibold py-2 px-4 rounded-lg hover:bg-blue-200 transition" data-prompt="Gi·∫£i th√≠ch ng·∫Øn g·ªçn kh√°i ni·ªám 'V√¥ C√¥ng' (kh√¥ng c√¥ng tr·∫°ng) c·ªßa Trang T·ª≠ v√† t·∫°i sao vi·ªác kh√¥ng m√†ng ƒë·∫øn th√†nh t·ª±u l·∫°i c√≥ th·ªÉ l√† m·ªôt con ƒë∆∞·ªùng d·∫´n ƒë·∫øn h·∫°nh ph√∫c ƒë√≠ch th·ª±c trong x√£ h·ªôi hi·ªán ƒë·∫°i lu√¥n coi tr·ªçng th√†nh c√¥ng.">‚ú® Xem Di·ªÖn Gi·∫£i Hi·ªán ƒê·∫°i</button>
                    </div>
                    <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                        <div class="flex-grow">
                            <p class="text-4xl font-black text-[#00A6ED]">TH√ÅNH NH√ÇN</p>
                            <p class="text-2xl my-3">‚Üí</p>
                            <p class="text-3xl font-bold text-gray-700">V√î DANH (ÁÑ°Âêç)</p>
                            <p class="text-gray-500 mt-2">Kh√¥ng m√†ng ƒë·∫øn danh ti·∫øng, s·ª± ghi nh·∫≠n c·ªßa ng∆∞·ªùi ƒë·ªùi.</p>
                        </div>
                        <button class="gemini-btn mt-4 w-full bg-blue-100 text-blue-800 font-semibold py-2 px-4 rounded-lg hover:bg-blue-200 transition" data-prompt="Gi·∫£i th√≠ch ng·∫Øn g·ªçn kh√°i ni·ªám 'V√¥ Danh' (kh√¥ng danh ti·∫øng) c·ªßa Trang T·ª≠. Trong th·ªùi ƒë·∫°i c·ªßa m·∫°ng x√£ h·ªôi, l√†m th·∫ø n√†o ƒë·ªÉ th·ª±c h√†nh tri·∫øt l√Ω n√†y ƒë·ªÉ t√¨m th·∫•y s·ª± b√¨nh y√™n n·ªôi t√¢m?">‚ú® Xem Di·ªÖn Gi·∫£i Hi·ªán ƒê·∫°i</button>
                    </div>
                </div>
            </section>

            <section id="conclusion">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-900">Nh√°nh 4: ƒê√≠ch ƒê·∫øn Cu·ªëi C√πng</h2>
                    <p class="mt-2 text-lg text-gray-600">T·ªïng h·ª£p con ƒë∆∞·ªùng v√† k·∫øt qu·∫£ c·ªßa h√†nh tr√¨nh "Ti√™u Dao".</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                     <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-2xl font-bold text-center text-[#0074D9] mb-4">C√°c Th√†nh T·ªë C·ªßa Con ƒê∆∞·ªùng</h3>
                        <p class="text-center text-gray-600 mb-4">ƒê·ªÉ ƒë·∫°t ƒë·∫øn t·ª± do, c·∫ßn ph·∫£i tu d∆∞·ª°ng v√† chuy·ªÉn h√≥a nh·∫≠n th·ª©c tr√™n ba ph∆∞∆°ng di·ªán ch√≠nh.</p>
                        <div class="chart-container h-[300px] md:h-[350px]">
                           <canvas id="pathChart"></canvas>
                       </div>
                   </div>
                   <div class="bg-gradient-to-br from-[#00A6ED] to-[#0074D9] rounded-lg shadow-lg p-8 text-center text-white">
                        <h3 class="text-3xl font-extrabold mb-4">K·∫øt Qu·∫£: T·ª± T·∫°i V√¥ Ng·∫°i</h3>
                        <p class="text-2xl mb-6">"Rong ch∆°i t·ª± t·∫°i trong c√µi v√¥ c√πng, h√≤a m√¨nh l√†m m·ªôt v·ªõi ƒê·∫°o."</p>
                        <p class="text-lg opacity-80">ƒê√¢y l√† tr·∫°ng th√°i t·ª± do tuy·ªát ƒë·ªëi v·ªÅ tinh th·∫ßn, kh√¥ng c√≤n b·ªã b·∫•t c·ª© ƒëi·ªÅu g√¨ tr√≥i bu·ªôc, k·ªÉ c·∫£ kh√¥ng gian, th·ªùi gian, v√† ch√≠nh b·∫£n th√¢n m√¨nh.</p>
                   </div>
                </div>
            </section>

             <section id="gemini-creative">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-900">‚ú® C·∫£m H·ª©ng Ti√™u Dao</h2>
                    <p class="mt-2 text-lg text-gray-600">H√£y ƒë·ªÉ Gemini s√°ng t√°c m·ªôt b√†i th∆° ng·∫´u h·ª©ng d·ª±a tr√™n tinh th·∫ßn c·ªßa Trang T·ª≠.</p>
                </div>
                <div class="max-w-md mx-auto bg-white rounded-lg shadow-lg p-8 text-center">
                    <p class="text-gray-600 mb-6">Nh·∫•n n√∫t b√™n d∆∞·ªõi ƒë·ªÉ nh·∫≠n m·ªôt b√†i th∆° 4 c√¢u ng·∫Øn g·ªçn, mang ƒë·∫≠m tinh th·∫ßn t·ª± do, t·ª± t·∫°i.</p>
                    <button id="poem-btn" class="w-full bg-green-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-600 transition text-lg">T·∫°o m·ªôt b√†i th∆° ng·∫´u h·ª©ng</button>
                </div>
            </section>

        </main>

        <footer class="text-center mt-16 py-6 border-t border-gray-200">
            <p class="text-gray-500">Infographic ƒë∆∞·ª£c tƒÉng c∆∞·ªùng b·ªüi Gemini API ƒë·ªÉ kh√°m ph√° t∆∞ t∆∞·ªüng Trang T·ª≠.</p>
        </footer>
    </div>
    
    <div id="gemini-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 gemini-modal-overlay">
        <div class="bg-white rounded-lg shadow-2xl max-w-2xl w-full mx-auto overflow-hidden">
            <div class="p-6">
                <div class="flex justify-between items-start">
                     <h3 id="modal-title" class="text-2xl font-bold text-gray-800">‚ú® Di·ªÖn Gi·∫£i t·ª´ Gemini</h3>
                     <button id="close-modal-btn" class="text-gray-400 hover:text-gray-600">&times;</button>
                </div>
               
                <div id="modal-content" class="mt-4 text-gray-600 space-y-4 text-lg min-h-[100px]">
                    <div id="loader" class="hidden justify-center items-center h-full">
                        <div class="gemini-loader"></div>
                    </div>
                    <p id="gemini-response" class="whitespace-pre-wrap"></p>
                </div>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            function wrapLabel(str, maxWidth) {
                if (str.length <= maxWidth) {
                    return str;
                }
                const words = str.split(' ');
                let lines = [];
                let currentLine = words[0];

                for (let i = 1; i < words.length; i++) {
                    if ((currentLine + " " + words[i]).length > maxWidth) {
                        lines.push(currentLine);
                        currentLine = words[i];
                    } else {
                        currentLine += " " + words[i];
                    }
                }
                lines.push(currentLine);
                return lines;
            }

            const tooltipTitleCallback = (tooltipItems) => {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                    return label.join(' ');
                } else {
                    return label;
                }
            };

            const visionCtx = document.getElementById('visionChart').getContext('2d');
            new Chart(visionCtx, {
                type: 'bar',
                data: {
                    labels: ['Ve s·∫ßu, chim c∆∞u', 'Chim B·∫±ng'],
                    datasets: [{
                        label: 'C·∫£nh gi·ªõi (∆∞·ªõc l·ªá)',
                        data: [10, 1000],
                        backgroundColor: ['#7FDBFF', '#0074D9'],
                        borderColor: ['#39CCCC', '#001f3f'],
                        borderWidth: 2
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { beginAtZero: true, ticks: { display: false } },
                        y: { ticks: { font: { size: 14, weight: 'bold' } } }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: { callbacks: { title: tooltipTitleCallback } }
                    }
                }
            });

            const pathCtx = document.getElementById('pathChart').getContext('2d');
            const rawPathLabels = ['Ph√° v·ª° gi·ªõi h·∫°n t∆∞ duy', 'Thu·∫≠n theo t·ª± nhi√™n', 'Tu d∆∞·ª°ng V√¥ K·ª∑, V√¥ C√¥ng, V√¥ Danh'];
            const wrappedPathLabels = rawPathLabels.map(label => wrapLabel(label, 16));

            new Chart(pathCtx, {
                type: 'doughnut',
                data: {
                    labels: wrappedPathLabels,
                    datasets: [{
                        label: 'Th√†nh T·ªë',
                        data: [33.3, 33.3, 33.4],
                        backgroundColor: ['#00A6ED', '#0074D9', '#7FDBFF'],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' },
                        tooltip: { callbacks: { title: tooltipTitleCallback } }
                    }
                }
            });

            const modal = document.getElementById('gemini-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const loader = document.getElementById('loader');
            const geminiResponseEl = document.getElementById('gemini-response');
            
            const showModal = () => modal.classList.remove('hidden');
            const hideModal = () => modal.classList.add('hidden');
            const showLoader = () => {
                loader.style.display = 'flex';
                geminiResponseEl.textContent = '';
            };
            const hideLoader = () => loader.style.display = 'none';

            closeModalBtn.addEventListener('click', hideModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    hideModal();
                }
            });
            
            async function callGeminiAPI(prompt, retries = 3, delay = 1000) {
                showModal();
                showLoader();
                
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                
                const payload = {
                    contents: [{ parts: [{ text: prompt }] }],
                };

                for (let i = 0; i < retries; i++) {
                    try {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const result = await response.json();
                        const candidate = result.candidates?.[0];

                        if (candidate && candidate.content?.parts?.[0]?.text) {
                            hideLoader();
                            geminiResponseEl.textContent = candidate.content.parts[0].text;
                            return;
                        } else {
                             throw new Error('Invalid response structure from API.');
                        }
                    } catch (error) {
                        console.error(`Attempt ${i + 1} failed:`, error);
                        if (i < retries - 1) {
                            await new Promise(res => setTimeout(res, delay));
                            delay *= 2; 
                        } else {
                            hideLoader();
                            geminiResponseEl.textContent = 'ƒê√£ c√≥ l·ªói x·∫£y ra khi k·∫øt n·ªëi t·ªõi Gemini. Vui l√≤ng th·ª≠ l·∫°i sau.';
                        }
                    }
                }
            }
            
       
            });

        });
    </script>
</body>
</html>

